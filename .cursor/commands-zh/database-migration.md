# 数据库迁移

## 概述

帮助创建和管理数据库迁移，生成遵循项目数据库框架约定的完整迁移文件。

## 步骤

1. **迁移分析**
    - 审查当前所需的数据库模式更改
    - 识别数据转换需求
    - 检查潜在的数据丢失或损坏风险
    - 分析模式更改的性能影响
2. **迁移脚本生成**
    - 创建升级和降级迁移脚本
    - 包含适当的索引和约束管理
    - 在需要时添加数据迁移逻辑
    - 实现回滚程序
3. **最佳实践**
    - 确保迁移是原子性和可逆的
    - 添加适当的错误处理和验证
    - 为大型数据集包含进度监控
    - 考虑零停机部署策略
4. **测试策略**
    - 创建测试数据场景
    - 在测试环境中验证迁移
    - 规划回滚程序和测试
    - 记录部署步骤和时机

## 数据库迁移检查清单

- [ ] 审查了模式更改和数据转换需求
- [ ] 检查了潜在的数据丢失或损坏风险
- [ ] 创建了升级和降级迁移脚本
- [ ] 包含了适当的索引和约束管理
- [ ] 确保迁移是原子性和可逆的
- [ ] 添加了错误处理和验证
- [ ] 创建了测试数据场景
- [ ] 在测试环境中验证了迁移
- [ ] 记录了部署步骤和时机

